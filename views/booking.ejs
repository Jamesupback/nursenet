<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fetch Location</title>
</head>
<body>
    <h1>Share Location</h1>
    <form action="/bookconfirm" method="POST" id="locationForm">
        <div>
            <label for="date">Date:</label>
            <input type="date" id="date" name="date">
        </div>
        <div>
            <label for="time">Time:</label>
            <select id="time" name="time">
                <option value="morning">Morning</option>
                <option value="noon">Noon</option>
                <option value="evening">Evening</option>
            </select>
        </div>
        <div>
            <label for="problem">Problem:</label>
            <input type="text" id="problem" name="problem">
        </div>
        <div>
            <label for="problemStatement">Problem Statement:</label>
            <textarea id="problemStatement" name="problemStatement"></textarea>
        </div>
        <div>
            <label for="locationLink">Location Link:</label>
            <input type="text" id="locationLink" name="locationLink">
        </div>
        <div>
            <button type="button" onclick="getLocation()">Share Location</button>
            <input type="hidden" id="latitude" name="latitude">
            <input type="hidden" id="longitude" name="longitude">
        </div>
        <div>
            <input type="submit" value="Submit">
        </div>
    </form>
    <script>
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(function(position) {
                    const latitude = position.coords.latitude;
                    const longitude = position.coords.longitude;
                    document.getElementById('locationLink').value = `https://www.google.com/maps/place/${latitude},${longitude}`;
                });
            } else {
                alert("Geolocation is not supported by this browser.");
            }
        }
    </script>
</body>
</html>
